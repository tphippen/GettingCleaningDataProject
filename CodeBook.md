Code Book for Getting and Cleaning Data Course Project
======================================================
Project Description
-------------------
The purpose of this course project was to get and clean a data set that was
generated by collecting data from the accelerometers and gyroscopes from the 
Samsung Galaxy S smartphone. The original source of the smartphone database is 
the UCI Machine Learning Repository. The database is titled, "Human Activity
Recognition Using Smartphones Dataset Version 1.0." It was authored by 

Jorge L. Reyes-Ortiz, Davide Anguita, Alessandro Ghio, Luca Oneto.    
Smartlab - Non Linear Complex Systems Laboratory     
DITEN - Universitâ€¡ degli Studi di Genova.     
Via Opera Pia 11A, I-16145, Genoa, Italy.     
activityrecognition@smartlab.ws     
www.smartlab.ws

The subjects of this machine learning study were 30 volunteers, aged 19-48. 
While wearing the smartphones on their waists, the subjects performed six
activities.

1. Walking
2. Walking Upstairs
3. Walking Downstairs
4. Sitting
5. Standing
6. Laying

While each subject performed these activities, the embedded accelerometer 
and gyroscope took measurements. Various processing Steps were performed on the
raw data generated by the accelerometer and gyroscope to generate 561 features 
that can be used for machine learning. 70% of the volunteer subjects (n = 21), 
were randomly paritioned to the machine learning training set. 30% of the 
volunteer subjects (n = 9) were partitioned to the machine learning test set.  

In brief, the goals of this project as outlined in the Course website's were to

1. Merge the training and test sets of the machine learning data set into one
data set containing the measurements for all 30 subjects. 
2. Select only the measurements on the mean and standard deviation for each 
measurement. 
3. Descriptively label the activities that each subject was engaged in while
their mesaurements were being taken by their phone's gyroscope and
accelerometer.
4. Give the variable names descriptive labels.
5. Generate a tidy set in which each variable is aggregated by mean for each
subject and each activity.

Data Sets Used for this Project
-------------------------------
run_analysis.R downloads all data sets and files provided as part the Samsung 
Galaxy machine learing database into a directory UCI_HAR_Data.However, 
not all of thesefiles are used for this project. As mentioned above, the 
features selected for this machine learning  database come from the processing 
of raw signal data generated by accelerometers and gyroscopes. Although this
signal data is available in the database, no raw signal data was used for this 
course project.

Processing of the raw data by Jorge L. Reyes-Ortiz and colleagues generated 561 
features for machine learning.

* ./UCI_HAR_Data/UCI HAR Dataset/features.txt - a list of the 561 features  
* ./UCI_HAR_Data/UCI HAR Dataset/train/X_train.txt' - feature data for subjects
in the Training set
* ./UCI_HAR_Data/UCI HAR Dataset/train/y_train.txt - numeric activity labels for
the training set (1,2,3,4,5, or 6)
* ./UCI_HAR_Data/UCI HAR Dataset/train/subject_train.txt - subject identifiers
for the training set
* ./UCI_HAR_Data/UCI HAR Dataset/test/x_test.txt - feature data for subjects in 
the test set
* ./UCI_HAR_Data/UCI HAR Dataset/test/y_test.txt - numeric activity labels for
the test set (1,2,3,4,5, or 6)
* ./UCI_HAR_Data/UCI HAR Dataset/test/subject_test.txt - subject identifiers for 
the test set
* ./UCI_HAR_Data/UCI HAR Dataset/activity_labels.txt - map of descriptive activity
labels to their numeric counterparts, e.g. "walking" -> 1

The data in each of these files was used for this project. 
Running run_analysis.R loads the data from each of these files into a data 
frame.  

The 561 Features
----------------
Jorge L. Reyes-Ortiz and colleagues generated 561 features by processing the raw
signal data. In ./UCI_HAR_Data/UCI HAR Dataset/features_info.txt, they provide 
details regarding how this processing was done, as well as their naming 
convention for the features. I excerpted this information from   
./UCI_HAR_Data/UCI HAR Dataset/features_info.txt and have included it here.

> The features selected for this database come from the accelerometer and gyroscope 3-axial raw signals tAcc-XYZ and tGyro-XYZ. These time domain signals (prefix 't' to denote time) were captured at a constant rate of 50 Hz. Then they were filtered using a median filter and a 3rd order low pass Butterworth filter with a corner frequency of 20 Hz to remove noise. Similarly, the acceleration signal was then separated into body and gravity acceleration signals (tBodyAcc-XYZ and tGravityAcc-XYZ) using another low pass Butterworth filter with a corner frequency of 0.3 Hz. 

> Subsequently, the body linear acceleration and angular velocity were derived in time to obtain Jerk signals (tBodyAccJerk-XYZ and tBodyGyroJerk-XYZ). Also the magnitude of these three-dimensional signals were calculated using the Euclidean norm (tBodyAccMag, tGravityAccMag, tBodyAccJerkMag, tBodyGyroMag, tBodyGyroJerkMag). 

> Finally a Fast Fourier Transform (FFT) was applied to some of these signals producing fBodyAcc-XYZ, fBodyAccJerk-XYZ, fBodyGyro-XYZ, fBodyAccJerkMag, fBodyGyroMag, fBodyGyroJerkMag. (Note the 'f' to indicate frequency domain signals). 

> These signals were used to estimate variables of the feature vector for each pattern:  
'-XYZ' is used to denote 3-axial signals in the X, Y and Z directions.

> tBodyAcc-XYZ   
> tGravityAcc-XYZ   
> tBodyAccJerk-XYZ   
> tBodyGyro-XYZ   
> tBodyGyroJerk-XYZ   
> tBodyAccMag   
> tGravityAccMag   
> tBodyAccJerkMag   
> tBodyGyroMag   
> tBodyGyroJerkMag   
> fBodyAcc-XYZ   
> fBodyAccJerk-XYZ       
> fBodyGyro-XYZ   
> fBodyAccMag    
> fBodyAccJerkMag    
> fBodyGyroMag    
> fBodyGyroJerkMag    

> mean(): Mean value   
std(): Standard deviation   
mad(): Median absolute deviation    
max(): Largest value in array   
min(): Smallest value in array    
sma(): Signal magnitude area    
energy(): Energy measure. Sum of the squares divided by the number of values.    
iqr(): Interquartile range    
entropy(): Signal entropy   
arCoeff(): Autorregresion coefficients with Burg order equal to 4   
correlation(): correlation coefficient between two signals   
maxInds(): index of the frequency component with largest magnitude   
meanFreq(): Weighted average of the frequency components to obtain a mean frequency   
skewness(): skewness of the frequency domain signal    
kurtosis(): kurtosis of the frequency domain signal    
bandsEnergy(): Energy of a frequency interval within the 64 bins of the FFT of each window.    
angle(): Angle between to vectors.    

> Additional vectors obtained by averaging the signals in a signal window
sample. These are used on the angle() variable:

> gravityMean    
> tBodyAccMean    
> tBodyAccJerkMean    
> tBodyGyroMean    
> tBodyGyroJerkMean    

Details on the Accomplishment of Project Goals
----------------------------------------------
### Goal 1: Merge the training and test set data

run_analysis. R loads The training and tests sets into data frames. 

`xtrain <- read.table("./UCI_HAR_Data/UCI HAR Dataset/train/X_train.txt", colClasses = "numeric")`

`xtest <- read.table("./UCI_HAR_Data/UCI HAR Dataset/test/x_test.txt", colClasses = "numeric")`

Since there are 561 features, both xtrain and xtest have a second dimension of
561. xtrain and xtest could therefore be merged using rbind()

`mergedSet <- rbind(xtrain,xtest)`

The feature names were loaded into a data frame and used as the column names of 
mergedSet

`features <- read.table("./UCI_HAR_Data/UCI HAR Dataset/features.txt", colClasses = "character")`

`names(mergedSet) <- features$V2`

### Goal 2: Select only the measurements on the mean and standard deviation for each measurement.

Features having the suffix "mean()" and features having the sufix "std()" meet
the requirements of the assigment. However, features suffixed by "meanFreq()", 
defined by the authors as, "Weighted average of the frequency components to 
obtain a mean frequency" as well as 

gravityMean   
tBodyAccMean   
tBodyAccJerkMean   
tBodyGyroMean   
tBodyGyroJerkMean    

"vectors obtained by averaging the signals in a signal window sample", might 
also meet the requirement.

I chose to seclect only those features having the suffix "mean()" and features 
having the sufix "std() as they are the mean or standard deviation of a single
measurement. Given the ambiguity in the course project description, I certainly 
wouldn't penalize anyway who included the others. 

`mergedSet <- mergedSet[,grepl("mean\\()|std\\()", names(mergedSet))]`

Running the code above resulted in the selection of 66 features. 

### Goal 3: Descriptively label the activities engaged in by the subjects

./UCI_HAR_Data/UCI HAR Dataset/activity_labels.txt  maps descriptive activity
labels to their numeric counterparts, e.g. "walking" -> 1. It was therefore 
trivial to replace numeric activity lables with their more descriptive counterparts.
This was performed after the column "activityLabel" containing the numeric labels
of the activities had been appended to the data frame.

` activityLabelMap <- read.table("./UCI_HAR_Data/UCI HAR Dataset/activity_labels.txt", colClasses = c("numeric,"character"))`    
`mergedSet$activityLabel <- factor(as.character(mergedSet$activityLabel), labels = tolower(activityLabelMap$V2))`

### Goal 4: Give the variable names descriptive labels

I wrote a function called cleanName() to remove non-alphanumeric characters and
convert abbreviations to long names. This function is included in run_analysis.R

Specifically, the function...

* calls the make.names() function to replace any non-alphanumeric characters with "."
* replaces all occurrences of ".mean" with "Mean"
* replaces Replace all occurrences of ".std" with "StandardDeviation"
* repalces all occurrences of "." with ""
* replaces the occurrence of "f" at beginning of a variable name with "Frequency"
* replaces the occurrence of "t" at beginning of a variable name with "Time"
* replaces all occurrences of "Acc" with "Accelerometer"
* replaces all occurences of "Gyro" with "Gyroscope"
* replaces all occurrences of "Mag" with "Magnitude"

The replacement of abbreviations with long names results in variable names that 
are quite long. However, they are descriptive and unambiguous. Given the length 
of the variables and the fact that each is composed of whole words, I chose to 
"camel code" the variable names rather than converting them to lowercase (as 
preferred by Jeff Leek and many others) which woud have rendered them 
incomprehensible, defating the purpose of making them descriptive.

### Goal 5: Generate a tidy set in which each variable is aggregated by mean for each subject and each activity.

After the merged data set was ordered by subject identifier (ID) and activity 
label, the data frame was "melted" as described by Hadley Wickham in his paper 
"Reshaping Data withreshape Package", Journal of Statistical Software, Nov. 2007, 
Volume 21, Issue 12.

`fullMelt <- melt(mergedSet, id = c("subjectID","activityLabel"))`

The data frame that is generated when this line of code is run qualifies as tidy.
There are 3 identifier (ID) variables (subjectID, activityLabel, and variable) 
and one measured variable. Each row represents one observation of one variable.
The dimensions of this set are 679734 X 4. The head of this data frame looks
like this:

subjectID activityLabel          variable     value    
         1       walking tBodyAcc-mean()-X 0.2820216    
         1       walking tBodyAcc-mean()-X 0.2558408    
         1       walking tBodyAcc-mean()-X 0.2548672    
         1       walking tBodyAcc-mean()-X 0.3433705    
         1       walking tBodyAcc-mean()-X 0.2762397    
         1       walking tBodyAcc-mean()-X 0.2554682    

Note that at the variable names for this data frame have not been cleaned and
that the data has not yet been aggregated by mean

Aggreagtion by mean is accomplished easily using a second function, (dcast()) 
from the reshape2 package.

`TidyData <- dcast(fullMelt, subjectID + activityLabel ~ variable,mean)`

TidyData is 180 observations of 68 variables. The first 12 rows and four columns 
are shown here:

subjectID      activityLabel tBodyAcc-mean()-X tBodyAcc-mean()-Y      
         1            walking         0.2773308      -0.017383819      
         1   walking_upstairs         0.2554617      -0.023953149      
         1 walking_downstairs         0.2891883      -0.009918505   
         1            sitting         0.2612376      -0.001308288   
         1           standing         0.2789176      -0.016137590    
         1             laying         0.2215982      -0.040513953     
         2            walking         0.2785741      -0.017022351     
         2   walking_upstairs         0.2671219      -0.014385492     
         2 walking_downstairs         0.2904016      -0.020005077    
         2            sitting         0.2706121      -0.015042682     
         2           standing         0.2766503      -0.015541860     
         2             laying         0.2802306      -0.024294484       
         
Once this data frame was generated, variable names were cleaned, and undescores
removed from walking_upstairs and walking_downstairs. Additionally, all variable 
names were prefaced with "mean"  

run_analysis.R writes TidyData to a space delimited .txt file with the command     
`write.table(TidyData,"TidySamsungGalaxyData.txt",sep = " ",row.names = FALSE)`    

In addition to including TidySamsungGalaxyData.txt in this respository, it has
been uploaded to the Getting and Cleaning Data course website for evaluation.
Rather than evaluating its tidiness using the URI provided by the course 
website, you may want to veiw it in this repository or load as an R data frame 
using the command    
`TidyData <- read.table("TidySamsungGalaxyData.txt", header = TRUE)`

Tidy Data Set Variables
-----------------------
### Variable Units
All of the original 561 features were normalized and bounded within 
[-1,1]. This stripped the units. Therefore all variables in the tidy data set are
unitless.

### Variable Names

Variable names are listed below. All variable names are prefaced by "mean" since
each variable is the mean of one of the original 561 features. 

If the variable name contains   
an additional "Mean" - the original feature was the mean of a measurement    
"StandardDeviation" - the original feature was the standard deviation of a
meaurement

If the variable name is terminated by           
"X" - indicates measurement of movement in the X direction  
"Y" - indicates measurement of movement in the Y direction  
"Z" - indicates measurement of movement in the Z direction  

If the variable name contains       
"Accelerometer" - indicates that the raw data used to derive this meausrement was
obtained with an accelerometer   
"Gyroscope" - indicates that the raw date used to derive this measurement was
obtained with a gyroscope   

If the variable name contains       
"Frequency" - indicates that the raw data used to generate this measurement was 
converted from time to frequency using a fast Fourier transform.   
"Time" - indicates that the raw data used to generate this measurement was NOT
converted using a fast Fourier transform.
   
If the variable name contains      
"Body" - corresponds to the body component of an acceleration signal   
"Gravity" - corresponds to the gravity component of an acceleration signal   

If the variable name contains   
"Jerk" - the measurement pertains to acceleration over time

If the variable names contains
"Magnitude" - refers to Euclidean magnitude of a measurement

1. subjectID - the subject identifier, a number between 1 and 30 inclusive
2. activityLabel - the activity performed by the subject while by being measured.
Activities include "walking", "walking upstairs", "walking downstairs", "sitting",
"standing", and "laying"
3. meanTimeBodyAccelerometerMeanX                                  
4. meanTimeBodyAccelerometerMeanY                                 
5. meanTimeBodyAccelerometerMeanZ                               
6. meanTimeBodyAccelerometerStandardDeviationX                   
7. meanTimeBodyAccelerometerStandardDeviationY                
8. meanTimeBodyAccelerometerStandardDeviationZ                   
9. meanTimeGravityAccelerometerMeanX                        
10. meanTimeGravityAccelerometerMeanY                               
11. meanTimeGravityAccelerometerMeanZ                               
12. meanTimeGravityAccelerometerStandardDeviationX                  
13. meanTimeGravityAccelerometerStandardDeviationY                  
14. meanTimeGravityAccelerometerStandardDeviationZ                 
15. meanTimeBodyAccelerometerJerkMeanX                              
16. meanTimeBodyAccelerometerJerkMeanY                              
17. meanTimeBodyAccelerometerJerkMeanZ                             
18. meanTimeBodyAccelerometerJerkStandardDeviationX                
19. meanTimeBodyAccelerometerJerkStandardDeviationY                
20. meanTimeBodyAccelerometerJerkStandardDeviationZ               
21. meanTimeBodyGyroscopeMeanX                                      
22. meanTimeBodyGyroscopeMeanY                                      
23. meanTimeBodyGyroscopeMeanZ                                      
24. meanTimeBodyGyroscopeStandardDeviationX                         
25. meanTimeBodyGyroscopeStandardDeviationY                         
26. meanTimeBodyGyroscopeStandardDeviationZ                         
27. meanTimeBodyGyroscopeJerkMeanX                                  
28. meanTimeBodyGyroscopeJerkMeanY                                  
29. meanTimeBodyGyroscopeJerkMeanZ                                  
30. meanTimeBodyGyroscopeJerkStandardDeviationX                     
31. meanTimeBodyGyroscopeJerkStandardDeviationY                     
32. meanTimeBodyGyroscopeJerkStandardDeviationZ                     
33. meanTimeBodyAccelerometerMagnitudeMean                          
34. meanTimeBodyAccelerometerMagnitudeStandardDeviation             
35. meanTimeGravityAccelerometerMagnitudeMean                       
36. meanTimeGravityAccelerometerMagnitudeStandardDeviation          
37. meanTimeBodyAccelerometerJerkMagnitudeMean                      
38. meanTimeBodyAccelerometerJerkMagnitudeStandardDeviation         
39. meanTimeBodyGyroscopeMagnitudeMean                              
40. meanTimeBodyGyroscopeMagnitudeStandardDeviation                 
41. meanTimeBodyGyroscopeJerkMagnitudeMean                          
42. meanTimeBodyGyroscopeJerkMagnitudeStandardDeviation             
43. meanFrequencyBodyAccelerometerMeanX                             
44. meanFrequencyBodyAccelerometerMeanY                             
45. meanFrequencyBodyAccelerometerMeanZ                             
46. meanFrequencyBodyAccelerometerStandardDeviationX                
47. meanFrequencyBodyAccelerometerStandardDeviationY                
48. meanFrequencyBodyAccelerometerStandardDeviationZ                
49. meanFrequencyBodyAccelerometerJerkMeanX                         
50. meanFrequencyBodyAccelerometerJerkMeanY                         
51. meanFrequencyBodyAccelerometerJerkMeanZ                         
52. meanFrequencyBodyAccelerometerJerkStandardDeviationX            
53. meanFrequencyBodyAccelerometerJerkStandardDeviationY            
54. meanFrequencyBodyAccelerometerJerkStandardDeviationZ            
55. meanFrequencyBodyGyroscopeMeanX                                 
56. meanFrequencyBodyGyroscopeMeanY                                 
57. meanFrequencyBodyGyroscopeMeanZ                                 
58. meanFrequencyBodyGyroscopeStandardDeviationX                   
59. meanFrequencyBodyGyroscopeStandardDeviationY                    
60. meanFrequencyBodyGyroscopeStandardDeviationZ                    
61. meanFrequencyBodyAccelerometerMagnitudeMean                     
62. meanFrequencyBodyAccelerometerMagnitudeStandardDeviation        
63. meanFrequencyBodyBodyAccelerometerJerkMagnitudeMean             
64. FrequencyBodyBodyAccelerometerJerkMagnitudeStandardDeviation
65. meanFrequencyBodyBodyGyroscopeMagnitudeMean                     
66. meanFrequencyBodyBodyGyroscopeMagnitudeStandardDeviation        
67. meanFrequencyBodyBodyGyroscopeJerkMagnitudeMean                 
68. meanFrequencyBodyBodyGyroscopeJerkMagnitudeStandardDeviation 